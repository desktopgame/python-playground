import{_ as J,a as R}from"./@babel-BjXSgPXB.js";import{r as u,j as P}from"./react-BWtM72Fx.js";import{c as Q,d as X,s as Y,h as Z,f as $,a as ee,l as te,b as ae,e as re,g as oe,i as ie,j as ne,k as se,m as ce,E as w,n as le,o as U,p as fe,q as ue,r as de,t as ge,u as he,v as me,w as pe,x as be,y as ye,z as V,A as m,B as ve,C as Se,D as ke,S as xe,F as Ce,H as Ne}from"./@codemirror-B5QyfEVo.js";import{t as e}from"./@lezer-Df2ESqix.js";var j=function(t){t===void 0&&(t={});var{crosshairCursor:a=!1}=t,o=[];t.closeBracketsKeymap!==!1&&(o=o.concat(Q)),t.defaultKeymap!==!1&&(o=o.concat(X)),t.searchKeymap!==!1&&(o=o.concat(Y)),t.historyKeymap!==!1&&(o=o.concat(Z)),t.foldKeymap!==!1&&(o=o.concat($)),t.completionKeymap!==!1&&(o=o.concat(ee)),t.lintKeymap!==!1&&(o=o.concat(te));var r=[];return t.lineNumbers!==!1&&r.push(ae()),t.highlightActiveLineGutter!==!1&&r.push(re()),t.highlightSpecialChars!==!1&&r.push(oe()),t.history!==!1&&r.push(ie()),t.foldGutter!==!1&&r.push(ne()),t.drawSelection!==!1&&r.push(se()),t.dropCursor!==!1&&r.push(ce()),t.allowMultipleSelections!==!1&&r.push(w.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&r.push(le()),t.syntaxHighlighting!==!1&&r.push(U(fe,{fallback:!0})),t.bracketMatching!==!1&&r.push(ue()),t.closeBrackets!==!1&&r.push(de()),t.autocompletion!==!1&&r.push(ge()),t.rectangularSelection!==!1&&r.push(he()),a!==!1&&r.push(me()),t.highlightActiveLine!==!1&&r.push(pe()),t.highlightSelectionMatches!==!1&&r.push(be()),t.tabSize&&typeof t.tabSize=="number"&&r.push(ye.of(" ".repeat(t.tabSize))),r.concat([V.of(o.flat())]).filter(Boolean)},Ee=m.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Me=function(t){t===void 0&&(t={});var{indentWithTab:a=!0,editable:o=!0,readOnly:r=!1,theme:l="light",placeholder:f="",basicSetup:d=!0}=t,s=[];switch(a&&s.unshift(V.of([ve])),d&&(typeof d=="boolean"?s.unshift(j()):s.unshift(j(d))),f&&s.unshift(Se(f)),l){case"light":s.push(Ee);break;case"dark":s.push(ke);break;case"none":break;default:s.push(l);break}return o===!1&&s.push(m.editable.of(!1)),r&&s.push(w.readOnly.of(!0)),[...s]},Be=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(t=>i.state.sliceDoc(t.from,t.to)),selectedText:i.state.selection.ranges.some(t=>!t.empty)}),G=Ce.define(),Ke=[];function We(i){var{value:t,selection:a,onChange:o,onStatistics:r,onCreateEditor:l,onUpdate:f,extensions:d=Ke,autoFocus:s,theme:p="light",height:C=null,minHeight:b=null,maxHeight:N=null,width:E=null,minWidth:M=null,maxWidth:B=null,placeholder:K="",editable:W=!0,readOnly:L=!1,indentWithTab:F=!0,basicSetup:H=!0,root:I,initialState:k}=i,[y,A]=u.useState(),[n,g]=u.useState(),[v,S]=u.useState(),T=m.theme({"&":{height:C,minHeight:b,maxHeight:N,width:E,minWidth:M,maxWidth:B},"& .cm-scroller":{height:"100% !important"}}),D=m.updateListener.of(c=>{if(c.docChanged&&typeof o=="function"&&!c.transactions.some(q=>q.annotation(G))){var x=c.state.doc,O=x.toString();o(O,c)}r&&r(Be(c))}),z=Me({theme:p,editable:W,readOnly:L,placeholder:K,indentWithTab:F,basicSetup:H}),h=[D,T,...z];return f&&typeof f=="function"&&h.push(m.updateListener.of(f)),h=h.concat(d),u.useLayoutEffect(()=>{if(y&&!v){var c={doc:t,selection:a,extensions:h},x=k?w.fromJSON(k.json,c,k.fields):w.create(c);if(S(x),!n){var O=new m({state:x,parent:y,root:I});g(O),l&&l(O,x)}}return()=>{n&&(S(void 0),g(void 0))}},[y,v]),u.useEffect(()=>{i.container&&A(i.container)},[i.container]),u.useEffect(()=>()=>{n&&(n.destroy(),g(void 0))},[n]),u.useEffect(()=>{s&&n&&n.focus()},[s,n]),u.useEffect(()=>{n&&n.dispatch({effects:xe.reconfigure.of(h)})},[p,d,C,b,N,E,M,B,K,W,L,F,H,o,f]),u.useEffect(()=>{if(t!==void 0){var c=n?n.state.doc.toString():"";n&&t!==c&&n.dispatch({changes:{from:0,to:c.length,insert:t||""},annotations:[G.of(!0)]})}},[t,n]),{state:v,setState:S,view:n,setView:g,container:y,setContainer:A}}var Le=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Fe=u.forwardRef((i,t)=>{var{className:a,value:o="",selection:r,extensions:l=[],onChange:f,onStatistics:d,onCreateEditor:s,onUpdate:p,autoFocus:C,theme:b="light",height:N,minHeight:E,maxHeight:M,width:B,minWidth:K,maxWidth:W,basicSetup:L,placeholder:F,indentWithTab:H,editable:I,readOnly:k,root:y,initialState:A}=i,n=J(i,Le),g=u.useRef(null),{state:v,view:S,container:T,setContainer:D}=We({root:y,value:o,autoFocus:C,theme:b,height:N,minHeight:E,maxHeight:M,width:B,minWidth:K,maxWidth:W,basicSetup:L,placeholder:F,indentWithTab:H,editable:I,readOnly:k,selection:r,onChange:f,onStatistics:d,onCreateEditor:s,onUpdate:p,extensions:l,initialState:A});u.useImperativeHandle(t,()=>({editor:g.current,state:v,view:S}),[g,T,v,S]);var z=u.useCallback(c=>{g.current=c,D(c)},[D]);if(typeof o!="string")throw new Error("value must be typeof string but got "+typeof o);var h=typeof b=="string"?"cm-theme-"+b:"cm-theme";return P.jsx("div",R({ref:z,className:""+h+(a?" "+a:"")},n))});Fe.displayName="CodeMirror";var _=i=>{var{theme:t,settings:a={},styles:o=[]}=i,r={".cm-gutters":{}},l={};a.background&&(l.backgroundColor=a.background),a.backgroundImage&&(l.backgroundImage=a.backgroundImage),a.foreground&&(l.color=a.foreground),a.fontSize&&(l.fontSize=a.fontSize),(a.background||a.foreground)&&(r["&"]=l),a.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(r[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(r[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(r[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(r[".cm-content"]={caretColor:a.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var f={};a.gutterActiveForeground&&(f.color=a.gutterActiveForeground),a.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:a.lineHighlight},f.backgroundColor=a.lineHighlight),r[".cm-activeLineGutter"]=f,a.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var d=m.theme(r,{dark:t==="dark"}),s=Ne.define(o),p=[d,U(s)];return p},He={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Ae=[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#0000ff"},{tag:[e.moduleKeyword,e.controlKeyword],color:"#af00db"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#0070c1"},{tag:e.heading,fontWeight:"bold",color:"#0070c1"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#267f99"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#795e26"},{tag:[e.number],color:"#098658"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#383a42"},{tag:[e.regexp],color:"#af00db"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#a31515"},{tag:[e.angleBracket],color:"#383a42"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#008000"},{tag:e.link,color:"#4078f2",textDecoration:"underline"},{tag:e.invalid,color:"#e45649"}];function De(i){var{theme:t="light",settings:a={},styles:o=[]}={};return _({theme:t,settings:R({},He,a),styles:[...Ae,...o]})}De();var Oe={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},we=[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#569cd6"},{tag:[e.controlKeyword,e.moduleKeyword],color:"#c586c0"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#9cdcfe"},{tag:e.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#4ec9b0"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#dcdcaa"},{tag:[e.number],color:"#b5cea8"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#d4d4d4"},{tag:[e.regexp],color:"#d16969"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#ce9178"},{tag:[e.angleBracket],color:"#808080"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#6a9955"},{tag:e.link,color:"#6a9955",textDecoration:"underline"},{tag:e.invalid,color:"#ff0000"}];function Ie(i){var{theme:t="dark",settings:a={},styles:o=[]}={};return _({theme:t,settings:R({},Oe,a),styles:[...we,...o]})}var Ge=Ie();export{Fe as R,Ge as v};
