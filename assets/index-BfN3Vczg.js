import{r as l,j as e,a as H}from"./react-BWtM72Fx.js";import{c as M}from"./react-dom-C6_td2cS.js";import{c as G}from"./zustand-VAWCCRJw.js";import{R as V,v as W}from"./@uiw-CevIiw-o.js";import{G as q}from"./@codemirror-CJKhxZXB.js";import{S as K}from"./@radix-ui--dy0hhNJ.js";import{c as J}from"./class-variance-authority-Dp3B9jqt.js";import{c as Q}from"./clsx-B-dksMZM.js";import{t as X}from"./tailwind-merge-D696Ktp4.js";import{D as u}from"./vaul-BNWM6MW_.js";import{S as Y,L as Z,D,U as _,a as O,P as ee,T as te,R as ae,F as se,b as re,H as ne,G as ie}from"./lucide-react-BPGwc9cs.js";import{P as oe,a as le,b as ce}from"./react-resizable-panels-Cp8aFBMt.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-BwwRFFrb.js";import"./@babel-BjXSgPXB.js";import"./@lezer-DXBQe7i_.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./react-remove-scroll-C9novxLy.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-Czpue0a7.js";import"./react-style-singleton-BIVBt-Vp.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-DzVV1Gvo.js";import"./use-callback-ref-Cdr6255r.js";import"./aria-hidden-DQ5UC2Eg.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const de={code:`import sys

print("Python", sys.version)

# https://github.com/vwh/python-playground`,output:"Running Python 3.12.7",error:null,direction:"vertical",pyodide:null,isPyodideLoading:!0,isAppLoading:!0,isCodeExecuting:!1,isLibLoading:!1},y=G((t,a)=>({...de,setCode:s=>t({code:s}),setOutput:s=>t(n=>({output:`${n.output}
${s}`})),clearOutput:(s="")=>t({output:s}),setError:s=>t({error:s}),setDirection:s=>t({direction:s}),initializePyodide:async()=>{if(!window.loadPyodide){t({error:"Pyodide script not loaded.",isPyodideLoading:!1});return}try{const s=await window.loadPyodide();await s.loadPackage("micropip");const n=await s.pyimport("micropip");window.micropip=n,window.pipPackages=[],t({pyodide:s,isPyodideLoading:!1})}catch(s){console.error("Failed to load Pyodide:",s),t({error:"Failed to load Pyodide. Please refresh the page and try again.",isPyodideLoading:!1})}},finishAppLoad:()=>{t({isAppLoading:!1})},pipInstall:async s=>{const{setOutput:n,setError:r}=a(),i=s.replace("pip install ","").trim();if(!(!window.micropip||!i)&&!window.pipPackages.includes(i)){t({isLibLoading:!0});try{window.pipPackages.push(i),await window.micropip.install(i,!0),n(`pip install ${i} successfully installed`),r(null)}catch(o){r(`Failed to install ${i}: ${o.message}`)}finally{t({isLibLoading:!1})}}},runCode:async s=>{const{pyodide:n,setError:r,setOutput:i}=a();if(n){t({isCodeExecuting:!0});try{r(null);const o=[];n.globals.set("print",(...c)=>{const p=c.join(" ");o.push(p),i(o.join(`
`))}),await n.runPythonAsync(s)}catch(o){console.error(o),r(o instanceof Error?o.message:"An unknown error occurred")}finally{t({isCodeExecuting:!1})}}}}));function ue(){const{code:t,setCode:a}=y(),s=l.useCallback(n=>{n&&a(n)},[a]);return e.jsx("div",{className:"h-full w-full overflow-hidden rounded-lg shadow-lg",children:e.jsx(V,{value:t,onChange:s,theme:W,extensions:[q],height:"100%",className:"h-full w-full",autoFocus:!0})})}function f(...t){return X(Q(t))}const pe=J("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=l.forwardRef(({className:t,variant:a,size:s,asChild:n=!1,...r},i)=>{const o=n?K:"button";return e.jsx(o,{className:f(pe({variant:a,size:s,className:t})),ref:i,...r})});w.displayName="Button";const z=l.forwardRef(({className:t,type:a,...s},n)=>e.jsx("input",{type:a,className:f("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));z.displayName="Input";const E=({shouldScaleBackground:t=!0,...a})=>e.jsx(u.Root,{shouldScaleBackground:t,...a});E.displayName="Drawer";const me=u.Trigger,fe=u.Portal,xe=u.Close,T=l.forwardRef(({className:t,...a},s)=>e.jsx(u.Overlay,{ref:s,className:f("fixed inset-0 z-[100] bg-black/80",t),...a}));T.displayName=u.Overlay.displayName;const I=l.forwardRef(({className:t,children:a,...s},n)=>e.jsxs(fe,{children:[e.jsx(T,{}),e.jsxs(u.Content,{ref:n,className:f("fixed inset-x-0 bottom-0 z-[100] mt-24 flex h-auto flex-col rounded-t-[10px] bg-background",t),...s,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),a]})]}));I.displayName="DrawerContent";const $=({className:t,...a})=>e.jsx("div",{className:f("grid gap-1.5 p-4 text-center sm:text-left",t),...a});$.displayName="DrawerHeader";const A=({className:t,...a})=>e.jsx("div",{className:f("mt-auto flex flex-col gap-2 p-4",t),...a});A.displayName="DrawerFooter";const F=l.forwardRef(({className:t,...a},s)=>e.jsx(u.Title,{ref:s,className:f("text-lg font-semibold leading-none tracking-tight",t),...a}));F.displayName=u.Title.displayName;const U=l.forwardRef(({className:t,...a},s)=>e.jsx(u.Description,{ref:s,className:f("text-sm text-muted-foreground",t),...a}));U.displayName=u.Description.displayName;function S({title:t,children:a}){return e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:t}),e.jsx("div",{className:"flex flex-col gap-1",children:a})]})}function ge(){const{code:t,pipInstall:a,isLibLoading:s}=y(),n=l.useCallback(()=>{const o=new Blob([t],{type:"text/plain"}),c=URL.createObjectURL(o),p=document.createElement("a");p.download="code.py",p.href=c,p.click(),URL.revokeObjectURL(c)},[t]),r=l.useCallback(async o=>{o.preventDefault();const c=new FormData(o.currentTarget).get("lib");await a(c)},[a]),i=l.useCallback(()=>{const o=new URLSearchParams(window.location.search);o.set("v",btoa(t));const c=`${window.location.origin}${window.location.pathname}?${o.toString()}${window.location.hash}`;window.history.replaceState({},document.title,c),navigator.clipboard.writeText(c)},[t]);return e.jsxs(E,{children:[e.jsx(me,{asChild:!0,children:e.jsxs(w,{title:"Open Settings",variant:"secondary",className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden md:inline",children:"Settings"})]})}),e.jsx(I,{children:e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsxs($,{children:[e.jsx(F,{className:"text-foreground",children:"Settings"}),e.jsx(U,{children:"Personalize your site experience here."})]}),e.jsxs("div",{className:"flex flex-col gap-4 px-4 py-2 pb-0",children:[e.jsx(S,{title:"Download libraries",children:e.jsxs("form",{className:"flex gap-1",onSubmit:r,children:[e.jsx(z,{type:"text",name:"lib",className:"text-foreground",placeholder:"pip install numpy",disabled:s}),e.jsx(w,{title:"Download library",variant:"secondary",type:"submit",disabled:s,children:s?e.jsx(Z,{className:"h-5 w-5 animate-spin"}):e.jsx(D,{className:"h-5 w-5"})})]})}),e.jsxs(S,{title:"Share your code",children:[e.jsxs(w,{title:"Download the code",variant:"secondary",onClick:n,className:"flex items-center justify-center",children:[e.jsx(D,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Download Code"})]}),e.jsxs(w,{title:"Share the code",variant:"secondary",onClick:i,className:"flex items-center justify-center",children:[e.jsx(_,{className:"mr-2 h-5 w-5"}),e.jsx("span",{children:"Share Code"})]})]})]}),e.jsx(A,{children:e.jsx(xe,{asChild:!0,children:e.jsx(w,{title:"Close the drawer",variant:"secondary",children:"Close"})})})]})})]})}const he=()=>{const{setDirection:t,direction:a,clearOutput:s,setError:n,runCode:r,code:i,isCodeExecuting:o}=y(),c=l.useCallback(()=>{t(a==="vertical"?"horizontal":"vertical")},[a,t]),p=l.useCallback(()=>{s("Running Python 3.12.7"),n(null)},[s,n]),x=l.useCallback(()=>{r(i)},[r,i]);return e.jsx("nav",{className:"mb-2 w-full rounded-b-lg bg-gray-900 px-4 py-2",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1 sm:justify-between md:gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 md:gap-2",children:[e.jsx(k,{onClick:x,disabled:o,icon:o?e.jsx(O,{className:"h-5 w-5 animate-spin"}):e.jsx(ee,{className:"h-5 w-5"}),label:"Run",title:"Execute Python Code"}),e.jsx(k,{onClick:p,disabled:o,icon:e.jsx(te,{className:"h-5 w-5"}),label:"Clear Terminal",title:"Clear Terminal"}),e.jsx(k,{onClick:c,icon:e.jsx(ae,{className:"h-5 w-5"}),label:a.substring(0,1).toUpperCase()+a.substring(1),title:"Change direction"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(ge,{})})]})})},k=l.memo(({onClick:t,disabled:a,icon:s,label:n,title:r})=>e.jsxs(w,{onClick:t,disabled:a,variant:"secondary",className:"text-foreground",title:r,children:[s,e.jsx("span",{className:"ml-2 hidden sm:inline",children:n})]}));k.displayName="NavButton";const be=l.memo(he);function we(){const{code:t}=y(),a=l.useMemo(()=>({lines:t.split(`
`).length,words:t.trim().split(/\s+/).length,characters:t.length}),[t]);return e.jsx("div",{className:"fixed bottom-1 left-1/2 z-50 hidden -translate-x-1/2 transform rounded-lg border border-accent md:block",children:e.jsxs("div",{className:"tex flex items-center space-x-2 bg-secondary bg-opacity-80 px-4 py-2 text-foreground shadow-lg backdrop-blur-sm",children:[e.jsx(L,{icon:e.jsx(se,{size:16}),value:a.lines,label:"Lines"}),e.jsx(L,{icon:e.jsx(re,{size:16}),value:a.words,label:"Words"}),e.jsx(L,{icon:e.jsx(ne,{size:16}),value:a.characters,label:"Chars"})]})})}function L({icon:t,value:a,label:s}){return e.jsxs("div",{className:"flex items-center gap-1 space-x-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[t,e.jsx("span",{className:"font-medium",children:a})]}),e.jsx("span",{className:"text-xs text-foreground/55",children:s})]})}function ye({text:t}){return e.jsxs("div",{className:"flex items-center gap-1 text-foreground",children:[e.jsx(O,{className:"h-5 w-5 animate-spin"}),e.jsx("p",{className:"font-bold",children:t})]})}function je(){const{output:t,error:a,setOutput:s,isPyodideLoading:n,runCode:r,pipInstall:i,setError:o,clearOutput:c}=y(),[p,x]=l.useState(""),g=l.useRef(null),h=l.useCallback(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[]);l.useEffect(()=>{h()},[t,h]);const j=l.useCallback(async()=>{await r("import os; print(os.getcwd())")},[r]),N=l.useCallback(async()=>{c("Running Python 3.12.7"),o(null)},[c,o]),v=l.useMemo(()=>({"pip install":async d=>await i(d),"echo ":async d=>await s(d.split(" ").slice(1).join(" ")),pwd:j,cwd:j,clear:N,cls:N}),[i,s,j,N]),b=l.useCallback(async d=>{d.preventDefault();const m=new FormData(d.currentTarget).get("terminalCode");if(!m.trim())return;s(m);const P=Object.entries(v).find(([B])=>m.startsWith(B));P?await P[1](m):await r(m),x("")},[r,s,v]);return n?e.jsx("div",{className:"flex h-full items-center justify-center bg-gray-900",children:e.jsx(ye,{text:"Initializing Python Environment"})}):e.jsxs("div",{ref:g,className:"h-full w-full overflow-y-auto bg-gray-900 px-4 py-3 font-mono text-sm text-gray-300",children:[(a||t)&&e.jsx("div",{className:`whitespace-pre-wrap ${a?"text-red-400":"text-gray-300"}`,children:a||t}),e.jsxs("form",{className:"flex items-center gap-2",onSubmit:b,children:[e.jsx("span",{className:"text-green-400",children:">>>"}),e.jsx("input",{value:p,name:"terminalCode",onChange:d=>x(d.target.value),className:"w-full bg-transparent text-gray-300 outline-none",autoComplete:"off",placeholder:"..."})]})]})}const ve=({className:t,...a})=>e.jsx(oe,{className:f("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a}),R=le,Ne=({withHandle:t,className:a,...s})=>e.jsx(ce,{className:f("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...s,children:t&&e.jsx("div",{className:"z-[99] flex h-16 w-4 items-center justify-center rounded border bg-background dark:border-secondary",children:e.jsx(ie,{className:"h-[12px] w-[12px] text-foreground"})})});function Ce(){const{direction:t,setCode:a,initializePyodide:s,finishAppLoad:n,pipInstall:r,isPyodideLoading:i,isAppLoading:o}=y();return l.useEffect(()=>{const c=x=>[...x.matchAll(/^#\s*@pip\s+([\w\-]+)/gm)].map(h=>h[1]);(async()=>{await s();try{const x=new URLSearchParams(window.location.search),g=x.get("gist"),h=x.get("file");if(g){const j=`https://api.github.com/gists/${g}`,v=await(await fetch(j)).json();if(h){const b=g+h,d=localStorage.getItem(b);if(d!==null){a(d);for(const C of c(d))await r(C)}else{const C=Object.values(v.files);for(const m of C)if(m.filename===h){a(m.content);for(const P of c(m.content))await r(P);localStorage.setItem(b,m.content);break}}}else{const b=Object.values(v.files);if(b.length>0){a(b[0].content);for(const d of c(b[0].content))await r(d)}}}}finally{n()}})()},[s,a]),i||o?e.jsx(Pe,{}):e.jsxs("main",{className:"flex h-screen flex-col bg-background md:mx-2 md:pb-3",children:[e.jsx(be,{}),e.jsxs(ve,{className:"border-t border-accent md:rounded-lg md:border",direction:t,children:[e.jsx(R,{defaultSize:65,children:e.jsx(ue,{})}),e.jsx(Ne,{className:"border-[1px]",withHandle:!0}),e.jsx(R,{defaultSize:35,children:e.jsx(je,{})})]}),e.jsx(we,{})]})}function Pe(){return e.jsx("section",{className:"absolute z-[999] flex h-screen w-full flex-col items-center justify-center gap-3 bg-background text-foreground",children:e.jsxs("div",{className:"relative flex h-full w-full flex-col items-center justify-center overflow-hidden bg-background md:shadow-xl",children:[e.jsx("img",{src:"./images/logo.webp",alt:"logo",className:"h-52 w-52 animate-pulse"}),e.jsx("p",{className:"sm:text-1xl mt-2 animate-pulse whitespace-pre-wrap text-center text-xl font-semibold tracking-tighter text-white",children:"Loading..."})]})})}M.createRoot(document.getElementById("root")).render(e.jsx(H.StrictMode,{children:e.jsx(Ce,{})}));
